<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.3.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<style type="text/css">
div.includewrap{
   width:100%;
   /* margin:0 auto; */
   
}

div.menu{
   z-index:100;
}

div.main{
   z-index:-1;
}


/* div.mainbanner{
/*    text-align:center; 
   position:absolute;
   top:20%;
}*/


/* div.layout{
   border: 0px solid gray;
   position: absolute;
   display:inline-flex;
} */

.btns {
  display: flex;
  position: fixed;
  right: .4rem;
  bottom: .4rem;
}

.btns > div {
  padding: .6rem 1.5rem;
  background: #111;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  border-radius: 5px;
  transition: .2s;
  color: #fff;
  margin-right: .4rem;
  
}

.moveTopBtn:hover {
  color: #000;
  background: #febf00;
}


.sidebar {
			margin : 0 auto;
			width: 130px;
			height: 25%;
			background-color: white;
			position: fixed;
			top: 200px;
			right: 30px;
			overflow-x: hidden;
			border-radius : 10px;
			padding-top: 20px;
			
		}
		
		
		
</style>
</head>
<%
   String mainPage = "layout/main.jsp";

   if(request.getParameter("main")!=null)
   {
      mainPage = request.getParameter("main");
   }
   String root = request.getContextPath();
   
%>

<body>
<div class = "includewrap">

   <div class="layout title">
     <jsp:include page="layout/title2.jsp"/>
   </div>

   <div class="layout menu">
     <jsp:include page="layout/menu.jsp"/>
   </div> 

   <div class="layout main">
    <%--  <jsp:include page = "layout/main.jsp"/> --%>
    <jsp:include page = "<%=mainPage %>"/>
   </div>

   <div class="layout footer">
    <jsp:include page = "layout/footer.jsp"/>
   </div>
   
   <div class = "btns">
   <div class = "moveTopBtn"><span class = "glyphicon glyphicon-triangle-top"></span>&nbsp;&nbsp;맨 위로</div>
   </div>
</div>

<script>
	const $topBtn = document.querySelector(".moveTopBtn");

	//버튼 클릭 시 맨 위로 이동
	$topBtn.onclick = () => {
	window.scrollTo({ top: 0, behavior: "smooth" });  
	}
</script>

<div class="sidebar" style = "border: 1px solid #4B62D3;">
		<h2 class = "" style = "font-size:15px; font-weight: bold; text-align:center;">최근 본 상품<hr style="color:#4B62D3;"></h2>
		<button style = "border:none; margin: 0 auto;  justify-content: center; display:flex; background:#fff;
 		 align-items: center;"><span class = "glyphicon glyphicon-chevron-up"></span></button>
 		 
  		<div class= "slidecontent" style="padding:10px; height:150px;">
  		<b><a><img src = "image/apple.jpg" style = "width:80px;"></a></b>
  		<div id="container">
 		<div class="slide_wrap">
    	<div class="slide_box">
      	<div class="slide_list clearfix">
        <div class="slide_content slide01">
  		
  		</div>
  
		<button style = "border:none; margin: 0 auto;  justify-content: center; display:flex;  background:#fff;
  		align-items: center;"><span class = "glyphicon glyphicon-chevron-down"></span></button>
		<p></p>
	</div>
	
	<script>
    (function () {
      const slideList = document.querySelector('.slide_list');  // Slide parent dom
      const slideContents = document.querySelectorAll('.slide_content');  // each slide dom
      const slideBtnNext = document.querySelector('.slide_btn_next'); // next button
      const slideBtnPrev = document.querySelector('.slide_btn_prev'); // prev button
      const pagination = document.querySelector('.slide_pagination');
      const slideLen = slideContents.length;  // slide length
      const slideWidth = 400; // slide width
      const slideSpeed = 300; // slide speed
      const startNum = 0; // initial slide index (0 ~ 4)
      
      slideList.style.width = slideWidth * (slideLen + 2) + "px";
      
      // Copy first and last slide
      let firstChild = slideList.firstElementChild;
      let lastChild = slideList.lastElementChild;
      let clonedFirst = firstChild.cloneNode(true);
      let clonedLast = lastChild.cloneNode(true);

      // Add copied Slides
      slideList.appendChild(clonedFirst);
      slideList.insertBefore(clonedLast, slideList.firstElementChild);

      // Add pagination dynamically
      let pageChild = '';
      for (var i = 0; i < slideLen; i++) {
        pageChild += '<li class="dot';
        pageChild += (i === startNum) ? ' dot_active' : '';
        pageChild += '" data-index="' + i + '"><a href="#"></a></li>';
      }
      pagination.innerHTML = pageChild;
      const pageDots = document.querySelectorAll('.dot'); // each dot from pagination

      slideList.style.transform = "translate3d(-" + (slideWidth * (startNum + 1)) + "px, 0px, 0px)";

      let curIndex = startNum; // current slide index (except copied slide)
      let curSlide = slideContents[curIndex]; // current slide dom
      curSlide.classList.add('slide_active');

      /** Next Button Event */
      slideBtnNext.addEventListener('click', function() {
        if (curIndex <= slideLen - 1) {
          slideList.style.transition = slideSpeed + "ms";
          slideList.style.transform = "translate3d(-" + (slideWidth * (curIndex + 2)) + "px, 0px, 0px)";
        }
        if (curIndex === slideLen - 1) {
          setTimeout(function() {
            slideList.style.transition = "0ms";
            slideList.style.transform = "translate3d(-" + slideWidth + "px, 0px, 0px)";
          }, slideSpeed);
          curIndex = -1;
        }
        curSlide.classList.remove('slide_active');
        pageDots[(curIndex === -1) ? slideLen - 1 : curIndex].classList.remove('dot_active');
        curSlide = slideContents[++curIndex];
        curSlide.classList.add('slide_active');
        pageDots[curIndex].classList.add('dot_active');
      });

      /** Prev Button Event */
      slideBtnPrev.addEventListener('click', function() {
        if (curIndex >= 0) {
          slideList.style.transition = slideSpeed + "ms";
          slideList.style.transform = "translate3d(-" + (slideWidth * curIndex) + "px, 0px, 0px)";
        }
        if (curIndex === 0) {
          setTimeout(function() {
            slideList.style.transition = "0ms";
            slideList.style.transform = "translate3d(-" + (slideWidth * slideLen) + "px, 0px, 0px)";
          }, slideSpeed);
          curIndex = slideLen;
        }
        curSlide.classList.remove('slide_active');
        pageDots[(curIndex === slideLen) ? 0 : curIndex].classList.remove('dot_active');
        curSlide = slideContents[--curIndex];
        curSlide.classList.add('slide_active');
        pageDots[curIndex].classList.add('dot_active');
      });

      /** Pagination Button Event */
      let curDot;
      Array.prototype.forEach.call(pageDots, function (dot, i) {
        dot.addEventListener('click', function (e) {
          e.preventDefault();
          curDot = document.querySelector('.dot_active');
          curDot.classList.remove('dot_active');
          
          curDot = this;
          this.classList.add('dot_active');

          curSlide.classList.remove('slide_active');
          curIndex = Number(this.getAttribute('data-index'));
          curSlide = slideContents[curIndex];
          curSlide.classList.add('slide_active');
          slideList.style.transition = slideSpeed + "ms";
          slideList.style.transform = "translate3d(-" + (slideWidth * (curIndex + 1)) + "px, 0px, 0px)";
        });
      });
    })();
  </script>
	
</body>
</html>