package data.Dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.List;
import java.util.Vector;

import com.mysql.cj.xdevapi.Result;

import data.dto.itemDto;
import mysql.db.dbConnect;

public class itemDao {

	
   dbConnect db=new dbConnect();
   
   //insert
   public void insertitem(itemDto dto)
   {
	   Connection conn=db.getConnection();
	   PreparedStatement pstmt=null;
	   
	   String sql="insert into item values(null,?,?,?,?,?,?,?,?,?,?,?,?,?)";

	   
	   try {
		pstmt=conn.prepareStatement(sql);
		
		pstmt.setString(1, dto.getItem_name());
		pstmt.setInt(2, dto.getItem_price());
		pstmt.setString(3, dto.getItem_sub_title());
		pstmt.setString(4, dto.getItem_info_img());
		pstmt.setString(5, dto.getItem_seller());
		pstmt.setString(6, dto.getItem_package_type());
		pstmt.setString(7, dto.getItem_package_detail());
		pstmt.setString(8, dto.getItem_sell_unit());
		pstmt.setString(9, dto.getItem_weight());
		pstmt.setString(10, dto.getItem_origin());
		pstmt.setString(11, dto.getItem_warning());
		pstmt.setString(12, dto.getItem_detail());
		pstmt.setString(13, dto.getItem_category());
		
		pstmt.execute();
		
		
	} catch (SQLException e) {
		// TODO Auto-generated catch block
		e.printStackTrace();
	}finally {
		db.dbClose(pstmt, conn);
	}
	   
   }
	
   
 //전체목록
 	public List<itemDto> getAllItem()
 	{
 		List<itemDto> list=new Vector<>();
 		
 		Connection conn=db.getConnection();
 		PreparedStatement pstmt=null;
 		Result rs=null;
 		
 		String sql="select * from item order by shopnum desc";
 		
 		try {
 			pstmt=conn.prepareStatement(sql);
 			rs=pstmt.ex
 			
 			while(rs.next())
 			{
 				itemDto dto=new itemDto();
 				
 				dto.setShopnum(rs.getString("shopnum"));
 				dto.setCategory(rs.getString("category"));
 				dto.setSangpum(rs.getString("sangpum"));
 				dto.setPhoto(rs.getString("photo"));
 				dto.setPrice(rs.getInt("price"));
 				dto.setIpgoday(rs.getString("ipgoday"));
 				
 				list.add(dto);
 			}
 		} catch (SQLException e) {
 			// TODO Auto-generated catch block
 			e.printStackTrace();
 		}finally {
 			db.dbClose(rs, pstmt, conn);
 		}
 		
 		return list;
 	}
   
   
   
   
   
	
}


